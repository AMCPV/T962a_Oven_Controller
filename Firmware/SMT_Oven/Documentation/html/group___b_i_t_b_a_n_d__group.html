<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>SMT_Oven: Bit-band access</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">SMT_Oven
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___b_i_t_b_a_n_d__group.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Bit-band access</div>  </div>
</div><!--header-->
<div class="contents">

<p>Cortex-M4 bit-band support.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga7c69390bdc43c643653d614eda1b5ae3"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:ga7c69390bdc43c643653d614eda1b5ae3"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group___b_i_t_b_a_n_d__group.html#ga7c69390bdc43c643653d614eda1b5ae3">USBDM::bitbandWrite</a> (T &amp;ref, const uint32_t bitNum, uint32_t value)</td></tr>
<tr class="memdesc:ga7c69390bdc43c643653d614eda1b5ae3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a value to a bit.  <a href="#ga7c69390bdc43c643653d614eda1b5ae3">More...</a><br /></td></tr>
<tr class="separator:ga7c69390bdc43c643653d614eda1b5ae3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga12950c6590427e9b74d8903b4c28c399"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:ga12950c6590427e9b74d8903b4c28c399"><td class="memTemplItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group___b_i_t_b_a_n_d__group.html#ga12950c6590427e9b74d8903b4c28c399">USBDM::bitbandRead</a> (T &amp;ref, const uint32_t bitNum)</td></tr>
<tr class="memdesc:ga12950c6590427e9b74d8903b4c28c399"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a bit.  <a href="#ga12950c6590427e9b74d8903b4c28c399">More...</a><br /></td></tr>
<tr class="separator:ga12950c6590427e9b74d8903b4c28c399"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga22b1b2a4dffe069e5cb7d46ddb470802"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:ga22b1b2a4dffe069e5cb7d46ddb470802"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group___b_i_t_b_a_n_d__group.html#ga22b1b2a4dffe069e5cb7d46ddb470802">USBDM::bitbandSet</a> (T &amp;ref, const uint32_t bitNum)</td></tr>
<tr class="memdesc:ga22b1b2a4dffe069e5cb7d46ddb470802"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a bit.  <a href="#ga22b1b2a4dffe069e5cb7d46ddb470802">More...</a><br /></td></tr>
<tr class="separator:ga22b1b2a4dffe069e5cb7d46ddb470802"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2dc05ed7f40806ca9ee7117041afaf28"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:ga2dc05ed7f40806ca9ee7117041afaf28"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group___b_i_t_b_a_n_d__group.html#ga2dc05ed7f40806ca9ee7117041afaf28">USBDM::bitbandClear</a> (T &amp;ref, const uint32_t bitNum)</td></tr>
<tr class="memdesc:ga2dc05ed7f40806ca9ee7117041afaf28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear a bit.  <a href="#ga2dc05ed7f40806ca9ee7117041afaf28">More...</a><br /></td></tr>
<tr class="separator:ga2dc05ed7f40806ca9ee7117041afaf28"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Cortex-M4 bit-band support. </p>
<p>Based on Freescale Application Note AN4838 <a href="http://cache.freescale.com/files/microcontrollers/doc/app_note/AN4838.pdf">http://cache.freescale.com/files/microcontrollers/doc/app_note/AN4838.pdf</a></p>
<p>Assumes the location has been allocated to:</p><ul>
<li>SRAM_U (0x2000_0000-0x200F_FFFF) with bit-band alias (0x2200_0000-0x23FF_FFFF)</li>
<li>AIPS/GPIO (0x4000_0000-0x400F_FFFF) with bit-band alias (0x4200_0000-0x43FF_FFFF)</li>
</ul>
<p>Most Global or Local Static variables end up in SRAM_L so are not usable<br />
Most Parameters and Local variables end up in SRAM_U</p>
<p>Examples:</p>
<p>Write a bit to a register </p><div class="fragment"><div class="line"><a class="code" href="group___b_i_t_b_a_n_d__group.html#ga7c69390bdc43c643653d614eda1b5ae3">bitbandWrite</a>(<a class="code" href="group___g_p_i_o_a___peripheral__access__layer___g_r_o_u_p.html#gac485358099728ddae050db37924dd6b7">GPIOA</a>-&gt;PDOR, 3, <span class="keyword">true</span>); <span class="comment">// Set bit # 3 of port</span></div>
</div><!-- fragment --><p>Set bit of register </p><div class="fragment"><div class="line"><a class="code" href="group___b_i_t_b_a_n_d__group.html#ga22b1b2a4dffe069e5cb7d46ddb470802">bitbandSet</a>(<a class="code" href="group___s_i_m___peripheral__access__layer___g_r_o_u_p.html#ga3dd2f4c4bfb41778902b4b5350143d9e">SIM</a>-&gt;SCGC5, <a class="code" href="group___s_i_m___register___masks___g_r_o_u_p.html#gaa7a1683eaa07a5c5adcaddf4b99ed83a">SIM_SCGC5_PORTA_SHIFT</a>); <span class="comment">// Enable clock to PORTA</span></div>
</div><!-- fragment --><p>Assuming a local variable 'local' </p><div class="fragment"><div class="line"><a class="code" href="group___b_i_t_b_a_n_d__group.html#ga2dc05ed7f40806ca9ee7117041afaf28">bitbandClear</a>(local, 3); <span class="comment">// Clear bit 3 of local</span></div>
</div><!-- fragment --><p>Note: The efficiency of this operation depends greatly on whether the address is a constant or can be pre-calculated. The code will usually be quite inefficient for local variables as the required address will be calculated each time i.e. the address calculation will overwhelm any advantage of the bitband operation</p>
<p>It is probably a good idea to use a dedicated segment in SRAM_U for bit-band variables and access globally. See linker files.</p>
<p>Fixed locations accessed by casts e.g. GPIOC etc will be very efficient since the calculation is a constant expression. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga2dc05ed7f40806ca9ee7117041afaf28"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void USBDM::bitbandClear </td>
          <td>(</td>
          <td class="paramtype">T &amp;&#160;</td>
          <td class="paramname"><em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>bitNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clear a bit. </p>
<p>Only the referenced bit is modified.</p>
<p><b>Example</b> - Clear bit of register </p><div class="fragment"><div class="line"><a class="code" href="group___b_i_t_b_a_n_d__group.html#ga2dc05ed7f40806ca9ee7117041afaf28">bitbandClear</a>(<a class="code" href="group___s_i_m___peripheral__access__layer___g_r_o_u_p.html#ga3dd2f4c4bfb41778902b4b5350143d9e">SIM</a>-&gt;SCGC5, <a class="code" href="group___s_i_m___register___masks___g_r_o_u_p.html#gaa7a1683eaa07a5c5adcaddf4b99ed83a">SIM_SCGC5_PORTA_SHIFT</a>); <span class="comment">// Disable clock to PORTA</span></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ref</td><td>Object to manipulate e.g. a register </td></tr>
    <tr><td class="paramname">bitNum</td><td>Bit number </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga12950c6590427e9b74d8903b4c28c399"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t USBDM::bitbandRead </td>
          <td>(</td>
          <td class="paramtype">T &amp;&#160;</td>
          <td class="paramname"><em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>bitNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read a bit. </p>
<p>Only the referenced bit is returned.</p>
<p><b>Example</b> - Read value of bit withon a register </p><div class="fragment"><div class="line"><span class="keywordflow">if</span> (<a class="code" href="group___b_i_t_b_a_n_d__group.html#ga12950c6590427e9b74d8903b4c28c399">bitbandRead</a>(<a class="code" href="group___g_p_i_o_a___peripheral__access__layer___g_r_o_u_p.html#gac485358099728ddae050db37924dd6b7">GPIOA</a>-&gt;PDIR, 3) {</div>
<div class="line">   <span class="comment">// Only done if bit # 3 of port is high</span></div>
<div class="line">}</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ref</td><td>Object to examine e.g. a register </td></tr>
    <tr><td class="paramname">bitNum</td><td>Bit number</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Bit read as boolean value </dd></dl>

</div>
</div>
<a class="anchor" id="ga22b1b2a4dffe069e5cb7d46ddb470802"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void USBDM::bitbandSet </td>
          <td>(</td>
          <td class="paramtype">T &amp;&#160;</td>
          <td class="paramname"><em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>bitNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set a bit. </p>
<p>Only the referenced bit is modified.</p>
<p><b>Example</b> - Set bit of register </p><div class="fragment"><div class="line"><a class="code" href="group___b_i_t_b_a_n_d__group.html#ga22b1b2a4dffe069e5cb7d46ddb470802">bitbandSet</a>(<a class="code" href="group___s_i_m___peripheral__access__layer___g_r_o_u_p.html#ga3dd2f4c4bfb41778902b4b5350143d9e">SIM</a>-&gt;SCGC5, <a class="code" href="group___s_i_m___register___masks___g_r_o_u_p.html#gaa7a1683eaa07a5c5adcaddf4b99ed83a">SIM_SCGC5_PORTA_SHIFT</a>); <span class="comment">// Enable clock to PORTA</span></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ref</td><td>Object to manipulate e.g. a register </td></tr>
    <tr><td class="paramname">bitNum</td><td>Bit number </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga7c69390bdc43c643653d614eda1b5ae3"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void USBDM::bitbandWrite </td>
          <td>(</td>
          <td class="paramtype">T &amp;&#160;</td>
          <td class="paramname"><em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint32_t&#160;</td>
          <td class="paramname"><em>bitNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write a value to a bit. </p>
<p>Only the referenced bit is modified.</p>
<p><b>Example</b> - Write value to bit of register </p><div class="fragment"><div class="line"><a class="code" href="group___b_i_t_b_a_n_d__group.html#ga7c69390bdc43c643653d614eda1b5ae3">bitbandWrite</a>(<a class="code" href="group___g_p_i_o_a___peripheral__access__layer___g_r_o_u_p.html#gac485358099728ddae050db37924dd6b7">GPIOA</a>-&gt;PDOR, 3, <span class="keyword">true</span>); <span class="comment">// Set bit # 3 of port</span></div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ref</td><td>Object to manipulate e.g. a register </td></tr>
    <tr><td class="paramname">bitNum</td><td>Bit number </td></tr>
    <tr><td class="paramname">value</td><td>Value to modify 0 or 1. Only the LSB is used </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Sep 27 2016 09:56:28 for SMT_Oven by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
